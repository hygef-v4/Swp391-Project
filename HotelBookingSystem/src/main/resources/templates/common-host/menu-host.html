<section class="pt-4" th:fragment="menu">
    <div class="container">
        <div class="card rounded-3 border p-3 pb-2">
            <!-- Avatar and info START -->
            <div class="d-sm-flex align-items-center">
                <div class="avatar avatar-xl mb-2 mb-sm-0">
                    <img class="avatar-img rounded-circle" th:src="${session.user.avatarUrl}">
                    

                </div>
                <h4 class="mb-2 mb-sm-0 ms-sm-3">
                    <span class="fw-light">Chào</span>
                    <span th:text="${session.user.fullName}">Tên người dùng</span>
                </h4>
            </div>
            <!-- Avatar and info END -->

            <!-- Responsive navbar toggler -->
            <button class="btn btn-primary w-100 d-block d-xl-none mt-2" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#dashboardMenu" aria-controls="dashboardMenu">
                <i class="bi bi-list"></i> Menu Bảng điều khiển
            </button>

            <!-- Nav links START -->
            <div class="offcanvas-xl offcanvas-end mt-xl-3" tabindex="-1" id="dashboardMenu">
                <div class="offcanvas-header border-bottom p-3">
                    <h5 class="offcanvas-title">Menu</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#dashboardMenu"
                            aria-label="Đóng"></button>
                </div>
                <div class="offcanvas-body p-3 p-xl-0">
                    <div class="navbar navbar-expand-xl">
                        <ul class="navbar-nav navbar-offcanvas-menu">

                            <li class="nav-item">
                                <a class="nav-link" href="/host-dashboard">
                                    <i class="bi bi-house-door fa-fw me-1"></i>Bảng điều khiển
                                </a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" href="/host-listing">
                                    <i class="bi bi-journals fa-fw me-1"></i>Khách sạn
                                </a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" href="/agent-bookings.html">
                                    <i class="bi bi-bookmark-heart fa-fw me-1"></i>Đặt chỗ
                                </a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" href="/agent-activities.html">
                                    <i class="bi bi-bell fa-fw me-1"></i>Hoạt động
                                </a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" href="/agent-earnings.html">
                                    <i class="bi bi-graph-up-arrow fa-fw me-1"></i>Thu nhập
                                </a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" href="/agent-reviews.html">
                                    <i class="bi bi-star fa-fw me-1"></i>Đánh giá
                                </a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" href="/agent-settings.html">
                                    <i class="bi bi-gear fa-fw me-1"></i>Cài đặt
                                </a>
                            </li>

                        </ul>

                    </div>
                </div>
            </div>
            <!-- Nav links END -->
        </div>
    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const currentPath = window.location.pathname;
            const navLinks = document.querySelectorAll('.navbar-nav .nav-link');

            navLinks.forEach(link => {
                // Normalize both paths (ignore query params/hash)
                const href = link.getAttribute('href').split('?')[0].split('#')[0];
                if (currentPath === href || currentPath.startsWith(href)) {
                    link.classList.add('active');
                }
            });
        });
    </script>

</section>
